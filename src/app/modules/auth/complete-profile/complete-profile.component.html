<form [formGroup]="profileForm" (ngSubmit)="onSubmit()" class="space-y-6">
    <h2 class="text-2xl font-bold text-center text-dark">Profil Bilgilerini Tamamla</h2>

    <!-- Name -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div>
            <label class="block text-sm font-medium text-dark">Ad</label>
            <input type="text" formControlName="firstName"
                class="w-full max-w-lg rounded border border-slate-300 p-2" />
        </div>
        <div>
            <label class="block text-sm font-medium text-dark">İkinci Ad</label>
            <input type="text" formControlName="middleName"
                class="w-full max-w-lg rounded border border-slate-300 p-2" />
        </div>
        <div>
            <label class="block text-sm font-medium text-dark">Soyad</label>
            <input type="text" formControlName="lastName" class="w-full max-w-lg rounded border border-slate-300 p-2" />
        </div>
    </div>

    <!-- Phone -->
    <div class="grid grid-cols-2 gap-6">
        <div>
            <label class="block text-sm font-medium text-dark">Telefon Kodu</label>
            <select formControlName="phoneCountryCode" class="w-full max-w-lg rounded border border-slate-300 p-2">
                <option value="+90">+90</option>
                <option value="+1">+1</option>
                <option value="+44">+44</option>
                <option value="+49">+49</option>
                <!-- daha fazla kod eklenebilir -->
            </select>
        </div>
        <div>
            <label class="block text-sm font-medium text-dark">Telefon Numarası</label>
            <input type="text" formControlName="phoneNumber"
                class="w-full max-w-lg rounded border border-slate-300 p-2" />
        </div>
    </div>

    <!-- Gender & Birthdate -->
    <div class="grid grid-cols-2 gap-6">
        <div>
            <label class="block text-sm font-medium text-dark">Cinsiyet</label>
            <select formControlName="gender" class="w-full max-w-lg rounded border border-slate-300 p-2">
                <option value="1">Erkek</option>
                <option value="2">Kadın</option>
                <option value="3">Diğer</option>
            </select>
        </div>
        <div>
            <label class="block text-sm font-medium text-dark">Doğum Tarihi</label>
            <input type="date" formControlName="birthOfDate"
                class="w-full max-w-lg rounded border border-slate-300 p-2" />
        </div>
    </div>

    <!-- Employment -->
    <div class="grid grid-cols-2 gap-6">
        <label class="flex items-center gap-2">
            <input type="checkbox" formControlName="isEmployed" class="form-checkbox" />
            Çalışıyor musun?
        </label>
        <label class="flex items-center gap-2">
            <input type="checkbox" formControlName="isHiring" class="form-checkbox" />
            Personel arıyor musun?
        </label>
    </div>

    <!-- Profession -->
    <div>
        <label class="block text-sm font-medium text-dark">Meslek</label>
        <select formControlName="professionId" class="w-full max-w-lg rounded border border-slate-300 p-2">
            <option *ngFor="let profession of professionsList" [value]="profession.id">{{ profession.name }}</option>
            <option value="custom">Diğer...</option>
        </select>
        <input *ngIf="profileForm.get('professionId')?.value === 'custom'" type="text"
            formControlName="customProfessionName" placeholder="Yeni Meslek Adı"
            class="mt-2 w-full max-w-lg rounded border border-slate-300 p-2" />
    </div>

    <!-- Universities -->
    <div formArrayName="universities" class="space-y-6">
        <div *ngFor="let group of universitiesFormArray.controls; let i = index" [formGroupName]="i"
            class="border p-4 rounded-lg bg-white shadow">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- University -->
                <div>
                    <label class="block text-sm font-medium text-dark">Üniversite</label>
                    <select formControlName="universityId" class="w-full max-w-lg rounded border border-slate-300 p-2">
                        <option *ngFor="let university of universitiesList" [value]="university.id">{{ university.name
                            }}</option>
                        <option value="custom">Diğer...</option>
                    </select>
                    <input *ngIf="group.get('universityId')?.value === 'custom'" type="text"
                        formControlName="customUniversityName" placeholder="Yeni Üniversite Adı"
                        class="mt-2 w-full max-w-lg rounded border border-slate-300 p-2" />
                </div>

                <!-- Department -->
                <div>
                    <label class="block text-sm font-medium text-dark">Bölüm</label>
                    <select formControlName="departmentId" class="w-full max-w-lg rounded border border-slate-300 p-2">
                        <option *ngFor="let department of departmentsList" [value]="department.id">{{ department.name }}
                        </option>
                        <option value="custom">Diğer...</option>
                    </select>
                    <input *ngIf="group.get('departmentId')?.value === 'custom'" type="text"
                        formControlName="customDepartmentName" placeholder="Yeni Bölüm Adı"
                        class="mt-2 w-full max-w-lg rounded border border-slate-300 p-2" />
                </div>

                <!-- Entry Year -->
                <div>
                    <label class="block text-sm font-medium text-dark">Giriş Yılı</label>
                    <input type="number" formControlName="universityEntryYear"
                        class="w-full max-w-lg rounded border border-slate-300 p-2" placeholder="2020" />
                </div>
            </div>
            <div class="mt-3 text-right">
                <button type="button" (click)="removeUniversity(i)" class="text-sm text-red-600 hover:underline">
                    Bu üniversite bilgisini kaldır
                </button>
            </div>
        </div>
    </div>

    <div class="mt-4">
        <button type="button" (click)="addUniversity()" class="bg-primary text-white py-2 px-4 rounded">
            + Üniversite Ekle
        </button>
    </div>

    <!-- Location -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
        <select formControlName="countryId" class="rounded border p-2 border-slate-300">
            <option value="" disabled selected>Ülke Seç</option>
            <option *ngFor="let country of countriesList" [value]="country.id">{{ country.name }}</option>
        </select>
        <select formControlName="stateId" class="rounded border p-2 border-slate-300">
            <option value="">Eyalet (opsiyonel)</option>
            <option *ngFor="let state of statesList" [value]="state.id">{{ state.name }}</option>
        </select>
        <select formControlName="cityId" class="rounded border p-2 border-slate-300">
            <option value="" disabled selected>Şehir Seç</option>
            <option *ngFor="let city of citiesList" [value]="city.id">{{ city.name }}</option>
        </select>
        <select formControlName="districtId" class="rounded border p-2 border-slate-300">
            <option value="" disabled selected>İlçe Seç</option>
            <option *ngFor="let district of districtsList" [value]="district.id">{{ district.name }}</option>
        </select>
    </div>

    <!-- Social Platforms -->
    <div *ngFor="let platform of socialPlatforms" class="mb-4">
        <label class="block text-sm font-medium text-dark">{{ platform.name }}</label>
        <input [formControlName]="'social_' + platform.id" [required]="platform.isRequired" type="url"
            placeholder="{{ platform.name }} profil linki"
            class="w-full max-w-lg rounded border border-slate-300 p-2" />
    </div>

    <button type="submit" [disabled]="profileForm.invalid"
        class="w-full bg-primary text-white font-semibold py-2 rounded hover:bg-primary-dark transition disabled:opacity-50 disabled:cursor-not-allowed">
        Kaydet ve Devam Et
    </button>
</form>